---
layout: post
title: "columnar memory layout"
등록일: 2023-04-18
수정일: 2023-04-
author: 이한솔
---


## **목차**
1. parquet, arrow


---

열 지향 방식이 압축을 어떻게 한다는건지?
parquet이 열 지향이라 좋은점


---

## **행 지향 저장 방식 vs 열 지향 저장 방식**
1. 행 지향 저장 방식 : 행(row) 단위로 데이터를 쭉 이어서 저장하는 방식.    
    - RDB    
2. 열 지향 저장 방식 : 열(column) 단위로 데이터를 저장하는 방식. 컬럼 단위의 집계에 최적화.    
   - 열 지향 storage : Apache Cassandra, Apache HBase    
     열 지향 데이터 저장 format : Apache parquet, Apache orc    
   - **장점**
        - 디스크 I/O를 줄일 수 있음    
        : 필요한 컬럼만을 로드함. 행 지향은 행 단위로 저장되어 있어서 필요 없는 열까지 디스크로부터 로드.    
        ![image](https://user-images.githubusercontent.com/109563345/233277650-c7369dea-5406-4b42-ba55-908898b9f77d.png)
        - 데이터 압축 효율 우수    
        : 같은 컬럼에는 대부분 유사하거나 중복된 데이터가 나열됨     
            → 중복된 데이터를 압축해서 저장 가능. 특히 같은 문자열의 반복은 매우 작게 압축이 가능. 
            ex) 데이터 압축 Deflate (Lz77 + 허프만)
            Lz77 : 현재 압축하려는 데이터가 이전에 존재했는지 파악해 반복여부를 표시    
            허프만 : 데이터 문자가 얼마나 자주 출현하는지 빈도를 파악해 빈도수가 높은 기호에 짧은 접두어 코드를 부여    
                    문자열 "aabbaabcd"    
                    a(5번), b(3번), c(1번)와 d(1번)    
                    이 순서대로 짧은 코드를 부여합니다. a=0, b=01, c=011, d=111    
                    → 00001010001011111 으로 압축    
                    압축 전의 문자열은 80비트 부호화 후에는 17비트로 압축    
            


